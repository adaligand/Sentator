<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Video Game</title>
    <link href='https://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <style>
        body {
            font-family: 'Varela Round', sans-serif;
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #fff;
        }
        table { border-collapse: collapse; }
        .text { font-family: 'Varela Round', sans-serif; font-size: 24px; color: #fff; }
        .arial { font-family: Arial, sans-serif; }
        #main {
            width: 90%;
            max-width: 1250px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 10px;
        }
        #frame { background-color: #222; }
        #sound { position: absolute; top: 10px; right: 10px; cursor: pointer; z-index: 10; }
        #haze { position: absolute; z-index: 2; }
        .meteor { position: absolute; display: none; z-index: 3; }
        #projectile { position: absolute; display: none; z-index: 4; }
        #explosion { position: absolute; display: none; z-index: 5; }
        #cannon { position: absolute; bottom: 5px; left: 350px; z-index: 6; }
        #score { padding-right: 20px; }
        #prompt { font-size: 28px; height: auto; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; }
        #entry { width: 100%; max-width: 350px; height: 40px; border: 2px solid #fff; border-radius: 20px; background-color: #111; padding-left: 10px; padding-right: 10px; }
        #entry:focus { outline: none; }
        #button { cursor: pointer; }
        .button { transition: all .1s ease-in-out; }
        .button:active { transform: scale(.9); }
        #mainMenu { width: 100%; height: 500px; position: relative; z-index: 10; }
        #endScreen { width: 100%; height: 500px; display: none; position: relative; z-index: 10; }
        .menuButton { border: 4px solid #fff; border-radius: 20px; display: inline-block; padding: 4px; cursor: pointer; margin: 2px; }
        .answer {
            border: 4px solid #fff;
            width: 100%;
            max-width: 330px;
            min-height: 40px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            padding: 4px 12px;
            cursor: pointer;
            margin: 2px;
            box-sizing: border-box;
        }
        .answer:hover { border-color: #ff0; }
        .num { margin-right: 6px; }
        .correctAns { background-color: #0c3; animation: blink 1s linear infinite; }
        .question-panel {
            width: 450px;
            height: 600px;
            background-color: #222;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #multChoice td { text-align: left; }
        #languageSelect {
            background-color: #111;
            color: #fff;
            border: 2px solid #fff;
            border-radius: 10px;
            padding: 5px;
            font-family: 'Varela Round', sans-serif;
            font-size: 16px;
            margin-top: 20px;
        }
        #keyboardContainer {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
            margin-top: 10px;
            max-width: 380px;
        }
        .keyboard-button {
            background-color: #444;
            color: #fff;
            border: 2px solid #888;
            border-radius: 5px;
            font-family: 'Varela Round', sans-serif;
            font-size: 20px;
            width: 40px;
            height: 40px;
            cursor: pointer;
        }
        .keyboard-button:hover {
            background-color: #666;
            border-color: #fff;
        }
        @keyframes blink { 50% { background-color: #222; } }
        @keyframes shake { from { transform: rotate(2deg); } to { transform: rotate(-2deg); } }
    </style>
</head>
<body onkeydown="keyCode(event)">
    <img src="https://www.flippity.net/images/8-Bit-Loading.gif" id="loading">
    
    <table cellpadding="0" cellspacing="0" border="0" align="center" id="main" style="display: none;">
        <tr>
            <td style="padding: 0px;">
                <table border="0" cellpadding="0" cellspacing="0">
                    <tr>
                        <td valign="top">
                            <table width="800" border="0" cellpadding="0" cellspacing="0">
                                <tr bgcolor="#333" height="6"><td colspan="3"></td></tr>
                                <tr>
                                    <td width="6" bgcolor="#333"></td>
                                    <td>
                                        <table width="100%" border="0" id="frame">
                                            <tr valign="top">
                                                <td height="560" style="position: relative;">
                                                    <img src="https://www.flippity.net/images/8-Bit-BG.png" style="position: absolute; z-index: 1;">
                                                    <img id="sound" src="https://www.flippity.net/images/8-Bit-Sound-On.png" onClick="switchSound()" title="Toggle Sound">
                                                    <img src="https://www.flippity.net/images/8-Bit-Haze.png" id="haze">
                                                    <table id="mainMenu">
                                                        <tr>
                                                            <td align="center">
                                                                <table width="100%">
                                                                    <tr>
                                                                        <td align="center"><p class="text" style="margin-bottom: 4px;">mode:</p><div id="noButton" class="menuButton text gametext" style="border-color: #0f3;" title="Type answer"><img src="https://www.flippity.net/images/8-Bit-Mode1.png"></div><div id="muButton" class="menuButton text gametext" title="Multiple choice"><img src="https://www.flippity.net/images/8-Bit-Mode2.png"></div></td>
                                                                        <td align="center"><p class="text" style="margin-bottom: 4px;">speed:</p><div id="faButton" class="menuButton text gametext" style="border-color: #0f3; width: 80px;" title="Normal"><img src="https://www.flippity.net/images/8-Bit-Fast.png"></div><div id="slButton" class="menuButton text gametext" style="width: 80px;" title="Slow"><img src="https://www.flippity.net/images/8-Bit-Slow.png"></div></td>
                                                                    </tr>
                                                                </table>
                                                                <img src="https://www.flippity.net/images/8-Bit-Play-Button.png" class="button" title="Click to play" onClick="preRestart()" style="margin-top: 30px;">
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    <table id="endScreen"></table>
                                                    <img src="https://www.flippity.net/images/8-Bit-Meteor-Gy.png" id="meteor" class="meteor">
                                                    <img src="https://www.flippity.net/images/8-Bit-Explosion.png" id="explosion">
                                                    <img src="https://www.flippity.net/images/8-Bit-Projectile.png" id="projectile">
                                                    <img src="https://www.flippity.net/images/8-Bit-Cannon.png" id="cannon">
                                                </td>
                                            </tr>
                                            <tr>
                                                <td height="1">
                                                    <table width="100%" border="0" bgcolor="#777" id="scoreBar">
                                                        <tr valign="middle">
                                                            <td width="33%"><img src="https://www.flippity.net/images/8-Bit-Heart.png" id="h1" style="margin-left: 12px;"><img src="https://www.flippity.net/images/8-Bit-Heart.png" id="h2"><img src="https://www.flippity.net/images/8-Bit-Heart.png" id="h3"><img src="https://www.flippity.net/images/8-Bit-Heart.png" id="h4"><img src="https://www.flippity.net/images/8-Bit-Heart.png" id="h5"></td>
                                                            <td width="34%" align="center"><img src="https://www.flippity.net/images/8-Bit-Power-Empty.png" id="p1"><img src="https://www.flippity.net/images/8-Bit-Power-Empty.png" id="p2"><img src="https://www.flippity.net/images/8-Bit-Power-Empty.png" id="p3"><img src="https://www.flippity.net/images/8-Bit-Power-Empty.png" id="p4"><img src="https://www.flippity.net/images/8-Bit-Power-Empty.png" id="p5"></td>
                                                            <td width="33%" align="right"><div id="score" class="text">0</div></td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                    <td width="6" bgcolor="#333"></td>
                                </tr>
                                <tr height="6" bgcolor="#333"><td colspan="3"></td></tr>
                            </table>
                        </td>
                        <td valign="top" class="question-panel">
                            <div id="prompt" class="text gametext">&nbsp;</div>
                            <table id="entryScreen" border="0"><tr><td valign="middle"><input id="entry" class="text gametext" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></td><td><img src="https://www.flippity.net/images/8-Bit-Button.png" id="button" class="button" onmousedown="pushButton()" onmouseup="releaseButton()" title="Click to fire [Enter]"></td></tr></table>
                            <table width="100%" id="multChoice" border="0" style="display: none; margin-bottom: 4px;">
                                <tr valign="middle"><td><img src="https://www.flippity.net/images/8-Bit-A.png" width="18" height="18" class="num"><div class="answer text gametext" id="a1" onClick="preFireMult(0)" title="Click to fire [A]">&nbsp;</div></td></tr>
                                <tr valign="middle"><td><img src="https://www.flippity.net/images/8-Bit-B.png" width="18" height="18" class="num"><div class="answer text gametext" id="a2" onClick="preFireMult(1)" title="Click to fire [B]">&nbsp;</div></td></tr>
                                <tr valign="middle"><td><img src="https://www.flippity.net/images/8-Bit-C.png" width="18" height="18" class="num"><div class="answer text gametext" id="a3" onClick="preFireMult(2)" title="Click to fire [C]">&nbsp;</div></td></tr>
                                <tr valign="middle"><td><img src="https://www.flippity.net/images/8-Bit-D.png" width="18" height="18" class="num"><div class="answer text gametext" id="a4" onClick="preFireMult(3)" title="Click to fire [D]">&nbsp;</div></td></tr>
                            </table>
                            <div class="keyboard-controls" id="keyboard-controls">
                                <select id="languageSelect" onchange="generateKeyboard(this.value)">
                                    <option value="french" selected>French</option>
                                    <option value="german">German</option>
                                    <option value="spanish">Spanish</option>
                                </select>
                                <div id="keyboardContainer"></div>
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

<script>
    var loaded = false; var origArray = []; var QandAs = []; var sound = true; var mode = "normal"; var levUp = 10; var chargeTime = 300; var interval = 10; var metSpeedInc = .1; var baseProjSpeed = 7; var projOriginX = 382; var projOriginY = 495; var its = 0; var confirmAns = false;
    
    // ✅ SOUND OBJECTS INITIALIZED WITH FULL URLS
    const startMusic = new Audio("https://www.flippity.net/StartMusic.mp3");
    const pulseSnd = new Audio("https://www.flippity.net/Pulse.mp3");
    const explosionSnd = new Audio("https://www.flippity.net/Explosion.mp3");
    const impactSnd = new Audio("https://www.flippity.net/Impact.mp3");
    const levelUpSnd = new Audio("https://www.flippity.net/LevelUp.mp3");
    const gameOverSnd = new Audio("https://www.flippity.net/GameOver.mp3");

    function switchSound() { if (sound) { document.getElementById("sound").src = "https://www.flippity.net/images/8-Bit-Sound-Off.png"; } else { document.getElementById("sound").src = "https://www.flippity.net/images/8-Bit-Sound-On.png"; } sound = !sound; }
    function switchMode(m) { const keyboardControls = document.getElementById('keyboard-controls'); if (m == 1) { mode = "multi"; document.getElementById("entryScreen").style.display = "none"; document.getElementById("multChoice").style.display = "table"; document.getElementById("noButton").style.borderColor = "#fff"; document.getElementById("muButton").style.borderColor = "#0f3"; keyboardControls.style.display = 'none'; } else { mode = "normal"; document.getElementById("multChoice").style.display = "none"; document.getElementById("entryScreen").style.display = "table"; document.getElementById("noButton").style.borderColor = "#0f3"; document.getElementById("muButton").style.borderColor = "#fff"; keyboardControls.style.display = 'block'; } }
    function switchSpeed(s) { if (s == 1) { interval = 20; document.getElementById("faButton").style.borderColor = "#fff"; document.getElementById("slButton").style.borderColor = "#0f3"; } else { interval = 10; document.getElementById("faButton").style.borderColor = "#0f3"; document.getElementById("slButton").style.borderColor = "#fff"; } }
    
    function preLoadContents() { const params = new URLSearchParams(window.location.search); const sheetUrl = params.get('sheet'); if (!sheetUrl) { alert("⚠️ No sheet URL provided in the address bar. Add ?sheet=YOUR_LINK to the end of the URL."); document.getElementById("loading").style.display = "none"; return; } Papa.parse(sheetUrl, { download: true, header: true, skipEmptyLines: true, complete: function(results) { if (results.data) { results.data.forEach(row => { if (row.English && row.French) { origArray.push([row.English.trim(), row.French.trim(), "", "", ""]); } }); } if (origArray.length === 0) { alert("⚠️ No valid data found. Check your sheet headers are 'English' and 'French'."); document.getElementById("loading").style.display = "none"; return; } loaded = true; startGame(); }, error: function(err) { console.error("CSV Loading Error:", err); alert("⚠️ Error loading or parsing the CSV file."); document.getElementById("loading").style.display = "none"; } }); }
    var f = document.getElementById('frame'); var c = document.getElementById('cannon'); var m = document.getElementById('meteor'); var p = document.getElementById('projectile'); var x = document.getElementById('explosion'); var s = document.getElementById('score'); var e = document.getElementById('entry');
    var meteorImgs = ["8-Bit-Meteor-Gy.png", "8-Bit-Meteor-Re.png", "8-Bit-Meteor-Or.png", "8-Bit-Meteor-Ye.png", "8-Bit-Meteor-Gr.png", "8-Bit-Meteor-Cy.png", "8-Bit-Meteor-Bl.png", "8-Bit-Meteor-Pu.png"].map(img => "https://www.flippity.net/images/" + img);
    function startGame() { document.getElementById("loading").style.display = "none"; document.getElementById("main").style.display = "table"; mainMenu(); }
    function mainMenu() { document.getElementById("endScreen").style.display = "none"; document.getElementById("mainMenu").style.display = "table"; }
    function preRestart() { document.getElementById("mainMenu").style.display = "none"; recharge(); if (sound) { startMusic.play(); } setTimeout(restart, 2000); }
    function restart() { prepAnswers(); hearts = 5; for (var i = 0; i < hearts; i++) { document.getElementById("h" + (i + 1)).src = "https://www.flippity.net/images/8-Bit-Heart.png"; } answer = false; score = 0; s.innerHTML = score; lev = 0; hits = 0; q = 0; fired = false; gameOver = false; resetProj(); meteorX = Math.floor(Math.random() * 730) + 10; meteorY = 0; metSpeed = .8; m.style.left = meteorX + "px"; m.style.top = meteorY + "px"; m.src = meteorImgs[lev]; m.style.display = "block"; document.getElementById("a1").classList.remove("correctAns"); document.getElementById("a2").classList.remove("correctAns"); document.getElementById("a3").classList.remove("correctAns"); document.getElementById("a4").classList.remove("correctAns"); setPrompts(); meteor(); confirmAns = false; generateKeyboard('french'); }
    function setPrompts() { document.getElementById("prompt").innerHTML = QandAs[q][0]; document.getElementById("prompt").title = QandAs[q][0]; if (mode == "multi") { document.getElementById("a1").innerHTML = QandAs[q][2][0]; document.getElementById("a1").title = "[A] " + QandAs[q][2][0]; document.getElementById("a2").innerHTML = QandAs[q][2][1]; document.getElementById("a2").title = "[B] " + QandAs[q][2][1]; document.getElementById("a3").innerHTML = QandAs[q][2][2]; document.getElementById("a3").title = "[C] " + QandAs[q][2][2]; document.getElementById("a4").innerHTML = QandAs[q][2][3]; document.getElementById("a4").title = "[D] " + QandAs[q][2][3]; } else { document.getElementById("button").src = "https://www.flippity.net/images/8-Bit-Button.png"; document.getElementById("button").title = "Click to fire [Enter]"; e.value = ""; e.disabled = false; e.focus(); } }
    function meteor() { meteorY += metSpeed; if (meteorY < 560) { m.style.top = meteorY + "px"; meteorTimer = setTimeout(meteor, interval); } else { impact(); } }
    function nextMet() { if (hearts > 0) { q++; if (q == QandAs.length) { prepAnswers(); q = 0; } setPrompts(); meteorY = 0; meteorX = Math.floor(Math.random() * 730) + 10; m.style.left = meteorX + "px"; m.style.top = meteorY + "px"; m.style.display = "block"; setTimeout(meteor, interval); } }
    function impact() { confirmAns = true; if (typeof meteorHitTimer !== 'undefined') { clearTimeout(meteorHitTimer); } hearts--; if (hearts < 5) { document.getElementById("h" + (hearts + 1)).src = "https://www.flippity.net/images/8-Bit-Heart-Empty.png"; } if (sound) { impactSnd.play(); } m.style.display = "none"; f.style.animation = "shake .05s linear 10 alternate"; setTimeout(function() { f.style.animation = ""; }, 600); if (mode == "multi") { document.getElementById("a" + (QandAs[q][3] + 1)).classList.add("correctAns"); } else { e.disabled = true; e.value = QandAs[q][1]; document.getElementById("button").src = "https://www.flippity.net/images/8-Bit-Button-Blinking.gif"; document.getElementById("button").title = "Click to continue [Enter]"; } if (hearts == 0) { gameOver = true; if (mode == "multi") { document.getElementById("a" + (QandAs[q][3] + 1)).style.animation = ""; } else { document.getElementById("button").src = "https://www.flippity.net/images/8-Bit-Button.png"; } setTimeout(stopGame, 2000); } }
    function preFire() { if (confirmAns) { confirmAns = false; nextMet(); } else { if (e.value.toLowerCase() == QandAs[q][1].toLowerCase()) { fire(1); } else { fire(0); } } }
    function pushButton() { document.getElementById("button").src = "https://www.flippity.net/images/8-Bit-Button-On.png"; }
    function releaseButton() { document.getElementById("button").src = "https://www.flippity.net/images/8-Bit-Button.png"; preFire(); }
    function preFireMult(nm) { if (confirmAns) { if (nm == QandAs[q][3]) { document.getElementById("a" + (QandAs[q][3] + 1)).classList.remove("correctAns"); confirmAns = false; nextMet(); } } else { if (nm == QandAs[q][3] || QandAs[q][2][nm] == QandAs[q][1]) { fire(1); } else { fire(0); } } }
    function fire(ans) { if (!fired && !gameOver && charged) { if (sound) { pulseSnd.play(); } fired = true; charged = false; discharge(); recharge(); var x = meteorX + 20 - 392; var y = 560 - 60 - 20 - meteorY; var d = Math.sqrt(x * x + y * y); var i = d / projSpeed; y -= i * metSpeed; d = Math.sqrt(x * x + y * y); projSpeed = d / i; angle = Math.atan2(y, x); if (ans == 1) { meteorHitTimer = setTimeout(meteorHit, i * interval); answer = true; hits++; } else { if (Math.abs(angle) > 1.57) { angle -= .4; } else { angle += .4; } } p.style.display = "block"; projectile(); if (mode != "multi") { e.value = ""; setTimeout(e.focus(), 100); } } }
    function projectile() { its++; var lft = p.offsetLeft; var top = p.offsetTop; if (top > 0 && top < 550 && lft > 0 && lft < 770) { p.style.left = projOriginX + (Math.cos(angle) * projSpeed * its) + "px"; p.style.top = projOriginY - (Math.sin(angle) * projSpeed * its) + "px"; projectileTimer = setTimeout(projectile, interval); } else { resetProj(); } }
    function meteorHit() { clearTimeout(meteorTimer); updateScore(10000); x.style.left = meteorX - 8 + "px"; x.style.top = meteorY - 8 + "px"; x.style.display = "block"; m.style.display = "none"; if (sound) { explosionSnd.play(); } if (hits % levUp == 0) { if (sound) { setTimeout(function(){levelUpSnd.play();}, 500); } lev++; updateScore(50000); if (lev < meteorImgs.length) { m.src = meteorImgs[lev]; } metSpeed += metSpeedInc; setTimeout(nextMet, 1500); } else { setTimeout(nextMet, 500); } setTimeout(resetExpl, 1000); resetProj(); }
    function resetProj() { p.style.display = "none"; its = 0; answer = false; projSpeed = baseProjSpeed; p.style.left = projOriginX + "px"; p.style.top = projOriginY + "px"; fired = false; }
    function recharge() { t1 = setTimeout(function() { document.getElementById("p1").src = "https://www.flippity.net/images/8-Bit-Power.png" }, chargeTime); t2 = setTimeout(function() { document.getElementById("p2").src = "https://www.flippity.net/images/8-Bit-Power.png" }, chargeTime * 2); t3 = setTimeout(function() { document.getElementById("p3").src = "https://www.flippity.net/images/8-Bit-Power.png" }, chargeTime * 3); t4 = setTimeout(function() { document.getElementById("p4").src = "https://www.flippity.net/images/8-Bit-Power.png" }, chargeTime * 4); t5 = setTimeout(function() { document.getElementById("p5").src = "https://www.flippity.net/images/8-Bit-Power.png" }, chargeTime * 5); setTimeout(function() { charged = true; }, chargeTime * 5); }
    function discharge() { for (var i = 1; i <= 5; i++) { document.getElementById("p" + i).src = "https://www.flippity.net/images/8-Bit-Power-Empty.png"; } }
    function resetExpl() { x.style.display = "none"; }
    function updateScore(sc) { score += sc; s.innerHTML = score.toLocaleString(); }
    function stopGame() { if (sound) { gameOverSnd.play(); } discharge(); document.getElementById("endScreen").innerHTML = "<tr><td align='center'><img src='https://www.flippity.net/images/8-Bit-Sad-Face.png' alt='Game Over' style='margin-bottom: 30px;'><div id='final-score' class='text' style='color: #ff0; margin-bottom: 30px;'>" + score.toLocaleString() + "</div><img src='https://www.flippity.net/images/8-Bit-Reload.png' id='reload' title='Restart game' onClick='mainMenu()' style='visibility: hidden; cursor: pointer;'></td></tr>"; document.getElementById("endScreen").style.display = "table"; setTimeout("document.getElementById('reload').style.visibility = 'visible';", 1500); clearTimeout(meteorTimer); clearTimeout(t1); clearTimeout(t2); clearTimeout(t3); clearTimeout(t4); clearTimeout(t5); }
    function keyCode(event) { if (!event.ctrlKey) { var x = event.keyCode; if (mode == "multi") { if (x == 65) { preFireMult(0) } else if (x == 66) { preFireMult(1) } else if (x == 67) { preFireMult(2) } else if (x == 68) { preFireMult(3) } } else { if (x == 13) { preFire() } } } }
    function shuffle(arr) { for (let i = arr.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1));[arr[i], arr[j]] = [arr[j], arr[i]]; } return arr; }
    function prepAnswers() { var tempArray = [...origArray]; shuffle(tempArray); for (var i = 0; i < tempArray.length; i++) { QandAs[i] = []; QandAs[i][0] = tempArray[0][0]; QandAs[i][1] = tempArray[0][1]; QandAs[i][2] = []; if (tempArray[0][2] != "") { QandAs[i][2][0] = tempArray[0][2]; } else { QandAs[i][2][0] = tempArray[1][1]; } if (tempArray[0][3] != "") { QandAs[i][2][1] = tempArray[0][3]; } else { QandAs[i][2][1] = tempArray[2][1]; } if (tempArray[0][4] != "") { QandAs[i][2][2] = tempArray[0][4]; } else { QandAs[i][2][2] = tempArray[3][1]; } shuffle(QandAs[i][2]); var c = Math.floor(Math.random() * 4); QandAs[i][2].splice(c, 0, QandAs[i][1]); QandAs[i].splice(3, 0, c); tempArray.push(tempArray.shift()); } }
    function generateKeyboard(language) { const keyboardContainer = document.getElementById('keyboardContainer'); keyboardContainer.innerHTML = ''; let specialChars = []; switch (language) { case 'french': specialChars = ['à', 'â', 'ä', 'é', 'è', 'ê', 'ë', 'î', 'ï', 'ô', 'ö', 'ù', 'ü', 'û', 'ç']; break; case 'german': specialChars = ['ä', 'ö', 'ü', 'ß']; break; case 'spanish': specialChars = ['á', 'é', 'í', 'ó', 'ú', 'ñ']; break; } specialChars.forEach(function (char) { const button = document.createElement('button'); button.textContent = char; button.className = 'keyboard-button'; button.onclick = () => insertLetter(char); keyboardContainer.appendChild(button); }); }
    function insertLetter(letter) { const input = document.getElementById('entry'); if (input) { const start = input.selectionStart; const end = input.selectionEnd; input.value = input.value.substring(0, start) + letter + input.value.substring(end); input.selectionStart = input.selectionEnd = start + 1; input.focus(); } }
    document.getElementById('noButton').addEventListener('click', () => switchMode(0));
    document.getElementById('muButton').addEventListener('click', () => switchMode(1));
    document.getElementById('faButton').addEventListener('click', () => switchSpeed(0));
    document.getElementById('slButton').addEventListener('click', () => switchSpeed(1));
    preLoadContents();
</script>
</body>
</html>
